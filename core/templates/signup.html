{% extends "index.html" %}
{% block title %}Sign Up{% endblock %}

{% block content %}
  <h2>Create Account</h2>

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <form method="post" action="{% url 'core:signup' %}">
    {% csrf_token %}

    <!-- User basic info -->
    <div class="mb-3">
      <label for="first_name" class="form-label">First name</label>
      <input id="first_name" name="first_name" type="text" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="last_name" class="form-label">Last name</label>
      <input id="last_name" name="last_name" type="text" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input id="email" name="email" type="email" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Password</label>
      <input id="password" name="password" type="password" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="confirm_pw" class="form-label">Confirm Password</label>
      <input id="confirm_pw" name="confirm_pw" type="password" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="address" class="form-label">Address</label>
      <input id="address" name="address" type="text" class="form-control">
    </div>
    <div class="mb-3">
      <label for="phone" class="form-label">Phone</label>
      <input id="phone" name="phone" type="tel" class="form-control">
    </div>

   <!-- user fieldsâ€¦ -->
    <div class="mb-3">
      <label for="user_type">Account Type</label>
      <select id="user_type" name="user_type" class="form-select">
        <option value="1" selected>Customer</option>
        <option value="2">Restaurant</option>
      </select>
    </div>

    <div id="restaurantFields" class="mb-3" style="display:none;">
      <label for="restaurant_name">Restaurant Name</label>
      <input id="restaurant_name" name="restaurant_name" type="text" class="form-control">
      <label for="restaurant_description" class="mt-2">Description</label>
      <textarea id="restaurant_description" name="restaurant_description"
                class="form-control" rows="3"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Sign Up</button>
  </form>

  <script>
  function toggleRestFields() {
    var isRest = document.getElementById('user_type').value === '2';
    document.getElementById('restaurantFields').style.display = isRest ? 'block' : 'none';
  }
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('user_type').addEventListener('change', toggleRestFields);
    toggleRestFields();
  });
  </script>
{% endblock %}
